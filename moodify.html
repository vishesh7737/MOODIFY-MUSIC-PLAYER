<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Moodify Player</title>
  <style>

    * {
      margin: 0; padding: 0; box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }

    body {
      background: #000; color: white;
      display: flex; height: 100vh; overflow: hidden;
      transition: background 0.5s, color 0.5s;
    }

    body.light-mode { background: #f5f5f5; color: #111; }

    .sidebar {
      width: 80px; background: #121212; display: flex; flex-direction: column;
      align-items: center; padding-top: 20px; transition: background 0.5s;
    }

    body.light-mode .sidebar { background: #eaeaea; }

    .sidebar img {
      width: 40px; height: 40px; margin: 20px 0; border-radius: 8px;
    }

    .main-content { flex: 1; padding: 20px; overflow-y: auto; }
    .section-title { font-size: 20px; font-weight: 600; margin: 30px 0 15px; }

    .card-row { display: flex; gap: 20px; flex-wrap: wrap; }
    .card {
      background: rgba(255,255,255,0.1); backdrop-filter: blur(10px);
      border-radius: 16px; width: 160px; padding: 15px; cursor: pointer;
      transition: background 0.3s;
    }
    .card:hover { background: #252525; }
    body.light-mode .card { background: #fff; color: #111; }
    body.light-mode .card:hover { background: #f0f0f0; }

    .card img { width: 100%; border-radius: 8px; }
    .card-title { margin-top: 10px; font-size: 14px; font-weight: 600; }
    .card-desc { font-size: 12px; color: #aaa; }
    body.light-mode .card-desc { color: #555; }

    .top-bar { display: flex; justify-content: space-between; margin-bottom: 20px; }


 
    
    body.light-mode .player-bar { background: #eaeaea; border-top: 1px solid #ccc; }

    .controls { display: flex; align-items: center; margin-bottom: 8px; }
    .controls button {
      background: none; border: none; color: inherit;
      font-size: 20px; margin: 0 15px; cursor: pointer;
    }

    /* Seekbar */
    .seek-container {
      width: 80%; display: flex; align-items: center; gap: 10px;
    }
    #seekBar { flex: 1; cursor: pointer; }

    /* Day/Night Toggle */
    .toggle-wrapper {
      width: 90px;
       height: 45px;
      background: linear-gradient(145deg, #1e293b, #0f172a);
      border-radius: 50px;
       position: relative; 
       cursor: pointer;
      transition: background 0.6s ease-in-out, box-shadow 0.4s;
      box-shadow: inset 2px 2px 6px rgba(0,0,0,0.6),
                  inset -2px -2px 6px rgba(255,255,255,0.1);
      padding: 5px;
    }
    
    .toggle-circle {
      width: 36px; height: 36px; background: #FFD700; border-radius: 50%;
      position: absolute; left: 5px; top: 4px; transition: all 0.5s ease;
      box-shadow: 0 0 20px rgba(255,215,0,0.9);
      display: flex; align-items: center; justify-content: center; font-size: 22px;
    }
    .toggle-circle::before { content: "‚òÄÔ∏è"; }
    .toggle-wrapper.light .toggle-circle {
      left: 48px; background: #fff; box-shadow: 0 0 15px rgba(255,255,255,0.8);
    }
    .toggle-wrapper.light .toggle-circle::before { content: "üåô"; }

    /* Highlight active song */
    .active-song button {
      background: #1db954 !important;
      color: white !important; font-weight: bold;
      box-shadow: 0 0 10px rgba(29,185,84,0.6);
    }

    @media screen and (max-width: 768px) {
      .card-row { flex-direction: column; align-items: center; }
      .player-bar { left: 0; }
    }

/* üéµ Player Bar */
.player-bar {
  position: fixed;
  bottom: 0;
  left: 80px;
  right: 0;
  background: rgba(24,24,24,0.9);
  display: flex;
  align-items: center;
  justify-content: center;
  height: 80px;
  border-top: 1px solid #333;
  padding: 0 20px;
  gap: 15px;
}

/* üé∂ Visualizer Canvas */
#visualizer {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 70px;
  width: 100%;
  height: 100px;
  display: block;
}



    
  </style>
</head>
<body>
 
  </div>
 <div class="sidebar">
    <img src="https://img.icons8.com/ios-glyphs/30/ffffff/home.png" alt="Home">
    <img src="https://img.icons8.com/ios-glyphs/30/ffffff/search--v1.png" alt="Search">
    <img src="https://img.icons8.com/ios-glyphs/30/ffffff/like--v1.png" alt="Liked">
    <img src="https://img.icons8.com/ios-glyphs/30/ffffff/musical-notes.png" alt="Music">
  </div>

<div class="main-content">
  <div class="top-bar">
    <h1>Moodify</h1>
  </div>

  <div class="section-title">Choose Your Mood</div>
  <div class="card-row">
    <div class="card">
      <img src="SAD SONG IMAGE.jpg" alt="Moody Mix">
      <div class="card-title">SAD</div>
      <div class="card-desc">Embrace the mood with soulful sounds.</div>
    </div>
    <div class="card">
      <img src="happy-song.jpg" alt="Happy Mix">
      <div class="card-title">Happy</div>
      <div class="card-desc">Feel the joy, feel the beat!</div>
    </div>
    <div class="card">
      <img src="energetic.jpg" alt="Energetic">
      <div class="card-title">Energetic</div>
      <div class="card-desc">Powerful tracks to boost your energy.</div>
    </div>
  </div>

  
</div>
<div id="toogle">
  
<!-- Day/Night Toggle Button -->
<div id="dayNightToggle" class="toggle-wrapper">
  <div class="toggle-circle"></div>
</div>

<!-- Toggle Sound (Click Sound) -->
<audio id="toggleSound">
  <source src="toggle-button-on-166329.mp3" type="audio/mp3"> 
  Your browser does not support the audio element.
</audio>

<!-- Audio Player for Music -->
<audio id="audioPlayer" controls style="display:none;"></audio>

<!-- Player Bar -->
<div class="player-bar">
  <div class="controls">
    <canvas id="visualizer"></canvas>
    <button id="prevBtn">‚èÆÔ∏è</button>
    <button id="playBtn">‚ñ∂Ô∏è</button>
    <button id="nextBtn">‚è≠Ô∏è</button>
  </div>
  <div class="seek-container">
    <span id="currentTime">0:00</span>
    <input type="range" id="seekBar" min="0" max="100" value="0">
    <span id="totalDuration">0:00</span>
  </div>
</div>

</div>


<script>
  // Get the elements
  const audio = document.getElementById("audioPlayer");
  const playlistDiv = document.getElementById("playlist");
  const playBtn = document.getElementById("playBtn");
  const nextBtn = document.getElementById("nextBtn");
  const prevBtn = document.getElementById("prevBtn");
  const seekBar = document.getElementById("seekBar");
  const currentTimeEl = document.getElementById("currentTime");
  const totalDurationEl = document.getElementById("totalDuration");

  let currentPlaylist = [];
  let currentIndex = 0;

  const moodPlaylists = {
    "SAD": [
      { title: "Rainy Mood", url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" },
      { title: "Broken Strings", url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3" }
    ],
    "Happy": [
      { title: "Evening Breeze", url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" },
      { title: "Sunshine Smile", url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3"},
      { title: "Good Vibes Only", url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3" }
    ],
    "Energetic": [
      { title: "Badmashi", url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3" },
      { title: "Beast Mode", url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3" }
    ],
  };

  // Handle card click
  document.querySelectorAll(".card").forEach(card => {
    card.addEventListener("click", () => {
      const mood = card.querySelector(".card-title").innerText.trim();
      if (moodPlaylists[mood]) {
        currentPlaylist = moodPlaylists[mood];
        currentIndex = 0;
        playlistDiv.innerHTML = `<h2>${mood} Playlist</h2><ul id="songList" style="list-style:none;padding:0;"></ul>`;
        const songList = document.getElementById("songList");

        currentPlaylist.forEach((song, index) => {
          const li = document.createElement("li");
          li.innerHTML = `<button style="margin:10px 0;padding:10px 15px;border:none;border-radius:8px;background:#333;color:white;cursor:pointer;">‚ñ∂ ${song.title}</button>`;
          li.querySelector("button").addEventListener("click", () => {
            currentIndex = index;
            playSong();
          });
          songList.appendChild(li);
        });

        playSong(); // auto play first song
      }
    });
  });

  // Function to play the song
  function playSong() {
    audio.src = currentPlaylist[currentIndex].url;
    audio.play();
    playBtn.textContent = "‚è∏Ô∏è";

    // highlight active song
    document.querySelectorAll("#songList li").forEach((li, idx) => {
      li.classList.toggle("active-song", idx === currentIndex);
    });
  }

  // Toggle play/pause
  function togglePlay() {
    if (audio.paused) {
      audio.play();
      playBtn.textContent = "‚è∏Ô∏è";
    } else {
      audio.pause();
      playBtn.textContent = "‚ñ∂Ô∏è";
    }
  }

  // Next and previous song controls
  function nextSong() {
    if (currentPlaylist.length > 0) {
      currentIndex = (currentIndex + 1) % currentPlaylist.length;
      playSong();
    }
  }

  function prevSong() {
    if (currentPlaylist.length > 0) {
      currentIndex = (currentIndex - 1 + currentPlaylist.length) % currentPlaylist.length;
      playSong();
    }
  }

  // Event listeners for play, next, and previous buttons
  playBtn.addEventListener("click", togglePlay);
  nextBtn.addEventListener("click", nextSong);
  prevBtn.addEventListener("click", prevSong);
  audio.addEventListener("ended", nextSong);

  // Seekbar and time update
  function formatTime(sec) {
    const m = Math.floor(sec / 60);
    const s = Math.floor(sec % 60);
    return `${m}:${s < 10 ? "0" : ""}${s}`;
  }
  audio.addEventListener("timeupdate", () => {
    if (!isNaN(audio.duration)) {
      seekBar.value = (audio.currentTime / audio.duration) * 100;
      currentTimeEl.textContent = formatTime(audio.currentTime);
    }
  });

  audio.addEventListener("loadedmetadata", () => {
    totalDurationEl.textContent = formatTime(audio.duration);
  });

  seekBar.addEventListener("input", () => {
    audio.currentTime = (seekBar.value / 100) * audio.duration;
  });

  // Day/Night Toggle
  const toggle = document.getElementById('dayNightToggle');
  const toggleSound = document.getElementById('toggleSound'); // Get the toggle sound element
  
  toggle.addEventListener('click', () => {
    toggleSound.play(); // Play the sound when toggle is clicked
    toggle.classList.toggle('light');
    document.body.classList.toggle("light-mode");
  });

  // Remove Duplicate Declaration
  const canvas = document.getElementById("visualizer");
  const ctx = canvas.getContext("2d");

  canvas.width = window.innerWidth - 80;
  canvas.height = 80;

  let audioCtx, analyser, source, bufferLength, dataArray, animationId;

  // üéµ Setup analyser when play starts
  function setupVisualizer() {
    if (!audioCtx) {
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      analyser = audioCtx.createAnalyser();
      source = audioCtx.createMediaElementSource(audio);
      source.connect(analyser);
      analyser.connect(audioCtx.destination);
      analyser.fftSize = 128;

      bufferLength = analyser.frequencyBinCount;
      dataArray = new Uint8Array(bufferLength);
    }
  }

  // üé∂ Draw bars based on real frequency
  function draw() {
    animationId = requestAnimationFrame(draw);

    analyser.getByteFrequencyData(dataArray);

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    const barWidth = 8;
    const barGap = 4;
    let x = 0;

    for (let i = 0; i < bufferLength; i++) {
      const barHeight = dataArray[i] / 2;
      ctx.fillStyle = "#1DB954";
      ctx.fillRect(x, canvas.height - barHeight, barWidth, barHeight);
      x += barWidth + barGap;
    }
  }

  // üéµ Start visualization only when music plays
  audio.addEventListener("play", () => {
    setupVisualizer();
    audioCtx.resume();
    draw();
  });

  // üéµ Stop waves when paused
  audio.addEventListener("pause", () => {
    cancelAnimationFrame(animationId);
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  });

  // üéµ Reset when ended
  audio.addEventListener("ended", () => {
    cancelAnimationFrame(animationId);
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  });
</script>
